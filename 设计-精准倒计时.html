<!DOCTYPE>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>ç²¾å‡†å€’è®¡æ—¶</title>
</head>

<body>
ðŸ˜‚ï¼šè¯·æ‰“å¼€ console æŸ¥çœ‹
<script src="https://unpkg.com/dayjs"></script>
<script>

  /**
   * é—´éš”è®¡æ•°ï¼Œæ­¤æ–¹æ³•è¡Œä¸é€šï¼Œè¯¯å·®ä¼šè¶Šæ¥è¶Šå¤§
   */
  function IntervalGap() {
    const CHECK_TIME_GAP = 100;
    let lastTs = 0;
    let cnt = 0;
    const startTs = dayjs().valueOf();
    // å¼€å§‹
    setInterval(() => {
      const curTs = dayjs().valueOf();
      // 1s
      if (curTs - lastTs >= 1000) {
        lastTs = curTs;
        cnt++;
        console.log("åå·®", (curTs - startTs) - (cnt * 1000)); // ä»Ž -990 å¼€å§‹ï¼Œåˆ°ååˆ†é’ŸåŽ 65809
      }
    }, CHECK_TIME_GAP);
  }


  /**
   * å€’è®¡æ—¶æ‰§è¡Œï¼Œæ‰§è¡Œè‰¯å¥½ï¼Œåªéœ€è¦è€ƒè™‘ç½‘ç»œå»¶è¿Ÿå³å¯
   * @param ts
   */
  function timeCountdown(ts) {
    const CHECK_TIME_GAP = 500;
    const start = dayjs();
    const match = ts.match(/^(\d+):(\d+):(\d+)$/);
    const end = start.add(match[1], "hour").add(match[2], "minute").add(match[3], "second");
    // å¼€å§‹
    setInterval(() => {
      const curTs = dayjs().valueOf();
      const diff = end.diff(curTs);
      const hours = parseInt((diff % (1000 * 60 * 60 * 24)) / (1000 * 60 * 60));
      const minutes = parseInt((diff % (1000 * 60 * 60)) / (1000 * 60));
      const seconds = parseInt(diff % (1000 * 60) / 1000);
      console.log(hours, minutes, seconds);
    }, CHECK_TIME_GAP);
  }

  //IntervalGap();
  timeCountdown("00:10:00"); // 10åˆ†é’Ÿ
</script>
</body>
</html>
